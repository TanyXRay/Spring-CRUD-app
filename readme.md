# Применение CRUD в Spring-web-app с взаимодействием с БД на основе Spring Data JPA

##### В данном проекте реализован пример CRUD - приложения с применением паттерна Repository.

## В ветке jpa

1. *реализовано взаимодействие с БД посредством Spring Data JPA абстракции. Для использования JPA в pom была
   добавлена соответствующая зависимость - spring data-jpa, в классе SpringConfig указана аннотация
   @EnableJpaRepositories, там же EntityManagerFactory заменил SessionFactory и JpaTransactionManager заменил
   HibernateTransactionManager, создан интерфейс репозиторий с аннотацией @Repository и внедрен в класс сервисного слоя
   PeopleService с аннотацией @Service с последующей реализацией методов взаимодействия с БД с помощью репозитория*

## В ветке hibernate

1. *реализовано взаимодействие с БД посредством hibernate абстракции. Для использования Jdbc template в pom была
   добавлена соответствующая зависимость - hibernate-core, чтение настроек hibernate dialect и database происходит из
   конфиг. файла hibernate.properties, в классе SpringConfig реализованы методы по созданию фабрики сессии, транзации,
   методы, участвующие во взаимодействии с БД в классе PersonDAO помечены аннотацией @Transactional, все запросы в БД
   происходят через объект Session*

## В ветке jdbc-template:

1. *реализовано взаимодействие с БД посредством Jdbc template абстракции, благодаря чему код сократился в разы и нет
   дублирования. Для использования Jdbc template в pom была добавлена соответствующая зависимость, в конфигурационный
   класс добавлены бины JdbcTemplate, DataSource, внедрение зависимости было уже в классе PersonDAO*

## В ветке master:

1. *реализована функция READ из CRUD (при GET - запросе перехода на URL /people показываются данные - список людей со
   ссылкой на конкретного человека на отдельную страницу html, где отражены имя и id).*
2. *реализована функция POST из CRUD (при GET - запросе перехода на URL /people/new выходит окно для добавления
   данных пользователем (добавление имени человека), после ввода данных с помощью редиректа пользователя возвращает на
   показ всего списка людей (/people).*
3. *реализована функция PATCH из CRUD (при POST - запросе перехода на URL /people/1.../edit выходит окно для обновления
   данных пользователем (изменение имени человека), после ввода данных с помощью редиректа пользователя возвращает на
   показ всего списка людей, уже обновленного (/people). В спринг реализована функция фильтрации для поиска скрытых
   методов, так как HTML 5 не поддерживает самостоятельные запросы PATCH,DELETE,PUT, такие запросы делаются скрытыми
   методами в конфигурационных файлах (web.xml) или классе.*
4. *реализована функция DELETE из CRUD (при POST - запросе перехода на URL /people/1... выходит окно для удаления
   данных пользователем из списка людей, после ввода данных с помощью редиректа пользователя возвращает на
   показ всего списка людей, уже обновленного (/people). На страницу /people также была добавлена функция "Create new
   person" со ссылкой на /people/1.../edit(страница обновления данных) для добавления новой персоны.*
5. *добавлена необходимая валидация данных при POST, PATCH запросах (@Valid). В pom.xml указана зависимость
   hibernate-validator для использования.*
6. *добавлена дополнительная валидация данных по ошибкам, вытекающим из БД для более корректной визуализации ошибок (
   чтобы пользователю при POST, PATCH запросах не получать техническое отображения в виде 500 internal)). Для этого был
   создан класс, реализующий интерфейс Validator (пакета Spring Framework) и переопределены 2 метода: supports() и
   validate().
   для валидации данных при  (@Valid).*
7. *Добавлена валидация @Pattern на поле address класса Person c применением регулярного выражения.*